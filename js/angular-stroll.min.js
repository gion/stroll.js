!function(){"use strict";angular.module("stroll",[]).directive("stroll",function(){function t(t,e,s){function n(){stroll.bind(e,i)}var i={};"live"===s.stroll&&(i.live=!0),s.$observe("strollRefreshTrigger",function(){n()}),n()}var e={restrict:"A",replace:!1,link:t};return e})}();var stroll=function(){"use strict";function t(){if(f){requestAnimFrame(t);for(var e=0,s=a.length;s>e;e++)a[e].update()}}function e(e,i){if(!e.nodeName||/^(ul|ol)$/i.test(e.nodeName)===!1)return!1;n(e)&&s(e);var o=new r(e);i&&i.live&&(o.syncInterval=setInterval(function(){o.sync.call(o)},l)),o.sync(),a.push(o),1===a.length&&(f=!0,t())}function s(t){for(var e=0;e<a.length;e++){var s=a[e];s.element==t&&(s.destroy(),a.splice(e,1),e--)}0===a.length&&(f=!1)}function n(t){for(var e=0,s=a.length;s>e;e++)if(a[e].element==t)return!0;return!1}function i(t,e,s){var n,i;if("string"==typeof t){var o=document.querySelectorAll(t);for(n=0,i=o.length;i>n;n++)e.call(null,o[n],s)}else if("object"==typeof t&&"number"==typeof t.length)for(n=0,i=t.length;i>n;n++)e.call(null,t[n],s);else{if(!t.nodeName)throw"Stroll target was of unexpected type.";e.call(null,t,s)}}function o(){return!!document.body.classList}function r(t){this.element=t}var l=500,a=[],f=!1;r.prototype.sync=function(){this.items=Array.prototype.slice.apply(this.element.children),this.listHeight=this.element.offsetHeight;for(var t=0,e=this.items.length;e>t;t++){var s=this.items[t];s._offsetHeight=s.offsetHeight,s._offsetTop=s.offsetTop,s._offsetBottom=s._offsetTop+s._offsetHeight,s._state=""}this.update(!0)},r.prototype.update=function(t){var e=this.element.pageYOffset||this.element.scrollTop,s=e+this.listHeight;if(e!==this.lastTop||t){this.lastTop=e;for(var n=0,i=this.items.length;i>n;n++){var o=this.items[n];o._offsetBottom<e?"past"!==o._state&&(o._state="past",o.classList.add("past"),o.classList.remove("future")):o._offsetTop>s?"future"!==o._state&&(o._state="future",o.classList.add("future"),o.classList.remove("past")):o._state&&("past"===o._state&&o.classList.remove("past"),"future"===o._state&&o.classList.remove("future"),o._state="")}}},r.prototype.destroy=function(){clearInterval(this.syncInterval);for(var t=0,e=this.items.length;e>t;t++){var s=this.items[t];s.classList.remove("past"),s.classList.remove("future")}};var u={bind:function(t,s){o()&&i(t,e,s)},unbind:function(t){o()&&i(t,s)}};return window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),u}();
